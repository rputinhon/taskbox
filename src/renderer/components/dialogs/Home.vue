<template>
  <v-sheet class="windowbar-button" :color="analysing == false ? 'transparent' : 'workspace'">
    <v-tabs hide-slider vertical v-model="tabIndex" class="main">
      <v-tab v-for="(tab, t) in tabs" :key="t" v-show="!tab.disabled && ((tab.auth && authenticated) || !tab.auth)" :class="tab.c" :style="`min-width: ${tab.w || 50}px; height: ${tab.w || 50}px;max-width: ${tab.w || 50}px;`" @change="changed(t)">
        <v-tooltip bottom transition="none">
          <template v-slot:activator="{ on, attrs }">
            <v-btn tile icon v-on="on" width="50px" height="50px" v-bind="attrs" style="text-transform: capitalize">
              <svg v-if="t == 0" :style="tabIndex !== 0 && 'filter:grayscale(1)'" width="33" height="33" version="1.1" viewBox="-5 -6 48 48" xmlns="http://www.w3.org/2000/svg">
                <g transform="matrix(.34139 0 0 .34139 -8.5743 -59.818)">
                  <path d="m76.781 178.69c-8.9402 0.0545-18.945 3.0151-25.223 7.8928l-15.842 12.308c-3.5719 2.7752-5.3375 5.7089-5.3964 8.3673l-0.0258 1.6772v57.679h0.0396c0.13482 3.4095 3.1213 6.3251 8.7954 7.7947l42.732 11.067c10.262 2.6576 25.262-0.43892 33.633-6.9426l15.839-12.308c3.5262-2.7397 5.1603-5.6234 5.2805-8.2432l0.0422-1e-3 0.0913-59.258-0.0132 0.0164c-1e-3 -3.512-3.007-6.5268-8.8131-8.0305l-42.731-11.069c-2.5654-0.66441-5.4268-0.96847-8.4068-0.95031z" fill="#047dff" stroke-width="2.6384" />
                  <path d="m74.781 237.89a4.1032 4.4694 0 0 0-2.8968 1.3188l-12.792 14.024-4.9628-5.204a4.1032 4.4694 0 0 0-5.8012 0.11832 4.1032 4.4694 0 0 0 0.10863 6.321l7.8727 8.2554a4.1036 4.4699 0 0 0 5.7563-0.0693l15.641-17.143a4.1032 4.4694 0 0 0-0.01907-6.321 4.1032 4.4694 0 0 0-2.9062-1.3005z" color="#000000" fill="#fff" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7305" />
                  <path d="m76.781 178.69c-8.9402 0.0545-18.945 3.0151-25.223 7.8928l-15.491 12.097c-6.2641 4.3386-5.8203 8.4888-5.7725 10.255-0.09826 4.0056 5.0536 6.7343 8.835 7.7947 12.599 3.5329 42.732 11.067 42.732 11.067 10.262 2.6576 23.182 0.74982 31.553-5.7538l17.919-13.496c3.5262-2.7397 5.6503-5.7787 5.4764-9.226-0.30655-6.0753-5.1602-7.4949-9.2388-8.6115l-42.381-11.069c-2.5654-0.66441-5.4268-0.96847-8.4068-0.95031z" fill="#049bff" stroke-width="2.6384" />
                </g>
              </svg>
              <svg v-else style="pointer-events: none" width="26" version="1.1" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path :style="tabIndex !== tab.id && 'filter:grayscale(1)'" :d="tab.icon" fill="#0187f3" />
              </svg>
            </v-btn>
          </template>
          <span>{{ tab.name }}</span>
        </v-tooltip>
      </v-tab>
      <v-tab-item tabindex="0" :style="`background-color: ${analysing == false ? 'transparent' : '#262629'};`">
        <div class="mx-0" :style="`overflow-y:scroll;width:100%;height:calc(100vh - 40px);`">
          <v-layout align-center justify-start column>
            <tasks v-if="currentTaskBox" />
            <roots v-else :sm="4" :md="4" :lg="4" :xl="4" :options="['recent']" @newProject="$emit('newProject')" />
          </v-layout>
        </div>
      </v-tab-item>
      <v-tab-item tabindex="1" eager>
        <div class="mx-0" :style="`overflow-y:scroll;width:100%;height:calc(100vh - 40px);`">
          <v-layout align-center justify-start column>
            <file-list :folder="folders && folders.files" />
          </v-layout>
        </div>
      </v-tab-item>
      <v-tab-item tabindex="2" eager>
        <div class="mx-0" :style="`overflow-y:scroll;width:100%;height:calc(100vh - 40px);`">
          <v-layout align-center justify-start column>
            <template-list :folder="folders && folders.templates" />
          </v-layout>
        </div>
      </v-tab-item>
      <v-tab-item tabindex="3" eager>
        <div class="mx-0" :style="`overflow-y:scroll;width:100%;height:calc(100vh - 40px);`">
          <v-layout align-center justify-start column>
            <pack-list :folder="folders && folders.packs" />
          </v-layout>
        </div>
      </v-tab-item>
      <v-tab-item tabindex="4">
        <div class="mx-0" :style="`overflow-y:scroll;width:100%;height:calc(100vh - 40px);`">
          <v-layout align-center justify-start column>
            <settings />
          </v-layout>
        </div>
      </v-tab-item>
      <v-tab-item tabindex="5">
        <div class="mx-0" :style="`overflow-y:scroll;width:100%;height:calc(100vh - 40px);`">
          <v-layout align-center justify-start column style="background-color: transparent !important">
            <info />
          </v-layout>
        </div>
      </v-tab-item>
    </v-tabs>
  </v-sheet>
</template>

<script>
import { mapState } from 'vuex';
import FileList from '../lists/FileList.vue';
// import Info from './Info.vue';
import PackList from '../lists/PackList.vue';
import Settings from './Settings.vue';

import { ipcRenderer } from 'electron';
import _ from 'lodash';
import store from '../../store';
import Roots from './Roots.vue';
import TemplateList from '../lists/TemplateList.vue';
import Tasks from './Tasks.vue';
import Info from './Info.vue';

export default {
  name: 'Home',
  components: {
    Info,
    FileList,
    PackList,
    Settings,
    Roots,
    TemplateList,
    Tasks,
  },
  Props: { tab: Number },
  data() {
    return {
      tabs: [
        {
          id: 0,
          name: 'roots',
          icon: `
                ${
                  this.currentTaskBox
                    ? 'm 21.454744,3.5828806 c -3.388512,0.020648 -7.180933,1.1428628 -9.560387,2.9916171 L 5.8900701,11.239299 c -1.353807,1.051862 -2.0227686,2.163343 -2.0450875,3.170943 l -0.028064,-0.03353 0.017924,22.531078 h 0.01481 c 0.051109,1.292273 1.1832952,2.397213 3.3338936,2.954193 L 23.379756,44.05664 c 3.889349,1.007297 9.575098,-0.166401 12.747704,-2.631406 l 6.003513,-4.664804 c 1.336503,-1.038416 1.955865,-2.13121 2.001428,-3.124162 l 0.0156,-7.74e-4 0.03508,-22.460128 -0.0054,0.0063 C 44.177101,9.8505477 43.03812,8.7077146 40.837524,8.1377851 L 24.641314,3.9431282 C 23.668977,3.6913041 22.584282,3.576034 21.454778,3.5829173 Z M 21.640477,5.55286 c 0.881148,-0.00535 1.72707,0.084231 2.485608,0.280683 l 5.868296,1.5161893 -13.91,10.7510777 -6.8307416,-1.782339 C 7.7561209,15.930631 6.890686,15.202106 6.6931847,14.333415 6.8401002,13.649554 7.350863,12.922022 8.2447385,12.227511 L 14.181317,7.8864302 c 1.856259,-1.442247 4.815718,-2.3174606 7.45916,-2.3335702 z m 9.365143,2.0588434 7.805645,2.2060601 c 1.49195,0.3863975 2.35794,1.1105085 2.559676,1.9749195 -0.143911,0.686899 -0.62491,1.454782 -1.550775,2.116041 l -5.907769,4.219363 c -2.612659,1.731361 -6.910614,2.838698 -9.944768,2.052888 l -6.872008,-1.818194 z m 10.545713,8.1531766 0.06203,17.224694 c -0.120663,0.834939 -0.474675,1.555448 -1.569488,2.406081 l -5.89401,4.282681 c -2.475011,1.922998 -7.036989,2.785578 -10.068823,1.99086 L 9.0960934,37.741273 C 7.6214911,37.358386 6.7587125,36.647266 6.5442135,35.795982 6.5332755,35.481773 6.5223775,35.167563 6.5114795,34.853354 l 0.062027,-16.726227 c 0.0016,-0.399866 0.7736586,0.308211 1.2303287,0.426483 l 15.5759408,3.94655 c 3.889348,1.007296 9.575098,-0.166401 12.747704,-2.631406 z m -12.155588,8.398329 c -1.02595,0 -1.85173,0.825782 -1.85173,1.85173 v 12.760178 c 0,1.02595 0.82578,1.852511 1.85173,1.852511 1.025949,0 1.85173,-0.826561 1.85173,-1.852511 V 26.014939 c 0,-1.025948 -0.825781,-1.85173 -1.85173,-1.85173 z m -8.340974,3.007211 c -0.08912,2.18e-4 -0.177472,0.03172 -0.246378,0.092 l -0.0015,-0.03977 -5.422647,3.846922 -1.812746,-2.43181 c -0.115953,-0.155094 -0.3404,-0.191874 -0.504457,-0.08264 l -1.404197,0.933272 c -0.168288,0.11217 -0.208794,0.334735 -0.09044,0.494315 l 3.03138,4.078486 c 0.11748,0.158308 0.346956,0.194247 0.511468,0.07953 l 7.1699,-4.990706 c 0.165966,-0.11536 0.202683,-0.338638 0.08109,-0.495874 l -1.051003,-1.359755 -0.01248,0.01325 c -0.02295,-0.03978 -0.05353,-0.0753 -0.09044,-0.103698 -0.0502,-0.02301 -0.104023,-0.03366 -0.157495,-0.03353 z'
                    : 'm 21.267181,3.3953769 c -3.38851,0.0207 -7.18069,1.1428 -9.56014,2.99155 l -6.00429,4.6648301 c -1.3538099,1.05187 -2.0230299,2.16379 -2.0453499,3.17139 l -0.0279,-0.0336 0.0181,22.53092 h 0.015 c 0.0511,1.29227 1.1830499,2.39736 3.3336499,2.95434 l 16.19642,4.19458 c 3.88935,1.0073 9.574938,-0.16636 12.747548,-2.63136 l 6.00325,-4.66484 c 1.33649,-1.03841 1.95586,-2.1314 2.00143,-3.12436 l 0.016,-5.1e-4 0.0346,-22.46013 -0.005,0.006 c -5e-4,-1.3311101 -1.13977,-2.4738101 -3.34037,-3.0437401 l -16.195878,-4.19509 c -0.97234,-0.25182 -2.05687,-0.36707 -3.18637,-0.36019 z m 0.18603,1.96991 c 0.88115,-0.005 1.7271,0.0847 2.48564,0.28112 4.93042,1.19812 9.803468,2.60457 14.684888,3.98425 1.49195,0.3864001 2.35832,1.1101501 2.56005,1.9745601 -0.14391,0.6869 -0.62494,1.45489 -1.55081,2.11615 l -5.90816,4.21938 c -2.61268,1.73136 -6.910458,2.83891 -9.944618,2.0531 -0.77738,-0.20776 -1.55537,-0.41296 -2.33319,-0.61908 0.004,-0.0473 0.006,-0.0948 0.006,-0.14314 V 8.6834269 c 0,-0.95884 -0.77179,-1.73064 -1.73064,-1.73064 h -0.15296 c -0.95885,0 -1.73116,0.7718 -1.73116,1.73064 v 9.7389501 c -2.92314,-0.76716 -5.84784,-1.52831 -8.77208,-2.29134 -1.49751,-0.38784 -2.36306,-1.1162 -2.56056,-1.98489 0.14691,-0.68386 0.65796,-1.4113 1.55184,-2.10582 l 5.93659,-4.3413301 c 1.85626,-1.44225 4.81553,-2.3176 7.45897,-2.33371 z m 19.910928,10.2123001 0.062,17.22479 c -0.12066,0.83493 -0.4746,1.55542 -1.56941,2.40605 l -5.89421,4.28243 c -2.47501,1.923 -7.036808,2.78581 -10.068638,1.99109 l -14.98513,-3.92793 c -1.4746,-0.38288 -2.33728,-1.09434 -2.55178,-1.94562 -0.0109,-0.31421 -0.0222,-0.62836 -0.0331,-0.94257 l 0.0625,-16.72611 c 0.002,-0.39987 0.77323,0.30805 1.2299,0.42633 l 15.57631,3.94653 c 3.88935,1.00729 9.574928,-0.16636 12.747538,-2.63137 z m -12.155848,8.39845 c -1.02594,0 -1.85156,0.82562 -1.85156,1.85157 v 12.75994 c 0,1.02596 0.82562,1.8526 1.85156,1.8526 1.025948,0 1.852088,-0.82664 1.852088,-1.8526 v -12.75994 c 0,-1.02595 -0.82614,-1.85157 -1.852088,-1.85157 z m -7.62899,1.39475 c -0.20152,0.006 -0.38642,0.10404 -0.51831,0.24081 l -5.05654,5.18521 -2.24534,-2.23862 c -0.29252,-0.29087 -0.7745,-0.29485 -1.07125,-0.008 l -1.38597,1.33635 h -5.1e-4 c -0.3041,0.29389 -0.30858,0.79103 -0.01,1.09037 v 5.2e-4 l 4.17855,4.17701 c 0.29668,0.2963 0.78889,0.2953 1.08418,-0.003 l 7.03419,-7.08174 10e-4,-5.2e-4 c 0.29754,-0.29996 0.29207,-0.79725 -0.0124,-1.09037 l -1.44332,-1.3901 -0.005,-0.006 c -0.15193,-0.13412 -0.3478,-0.21883 -0.54932,-0.21239 z m 0.0227,0.70228 c -0.001,4e-5 0.0133,-0.005 0.0605,0.0367 6.4e-4,5.6e-4 -1.4e-4,4.5e-4 5.2e-4,10e-4 l 1.42679,1.37511 c 0.028,0.027 0.028,0.0602 5.1e-4,0.0879 v 5.1e-4 l -3.44371,3.48196 -1.40354,-1.49138 3.32332,-3.46439 5.1e-4,-5.2e-4 c 0.0309,-0.0321 0.0365,-0.0269 0.0351,-0.0269 z'
                }`,
        },
        {
          id: 1,
          name: 'files',
          icon: 'M 9.6727308,5.282258 C 7.6642745,5.3353271 5.971897,7.0291843 5.970643,9.0803742 l -0.00546,6.5289188 v 0.531158 L 5.953677,33.958686 c -0.00213,3.500207 2.7313717,6.486438 6.215327,6.778491 l 23.381378,1.960581 c 3.483945,0.292054 6.460412,-2.458212 6.462895,-5.958249 l 0.01153,-15.788145 c 2.54e-4,-0.374173 -0.03269,-0.742064 -0.09252,-1.101823 h 0.06155 c 0.06215,-0.783593 0.07281,-5.191003 0.01204,-6.062784 -0.02134,-3.265122 -2.625121,-5.8710981 -5.811211,-5.9442466 -0.212396,-0.00491 -0.427194,0.00177 -0.644183,0.020007 L 23.154195,8.9018215 C 22.617233,7.3721286 21.223154,6.2280849 19.528129,6.0859928 L 10.07835,5.2937608 C 9.9420514,5.2823319 9.8066276,5.2787214 9.6727308,5.2822555 Z m 0.049514,2.8983524 c 0.036925,4.862e-4 0.074803,0.00226 0.1140335,0.0055 l 9.4497787,0.7917323 c 0.627698,0.052617 1.202502,0.679042 1.202354,1.3198883 l -0.002,5.504618 15.080932,1.262371 c 1.931055,0.161878 3.554932,1.932251 3.553541,3.884641 l -0.01097,15.788145 c -0.0017,1.952736 -1.386418,3.227777 -3.317473,3.065904 L 12.411032,37.843331 C 10.479986,37.681448 8.8557948,35.913258 8.8569861,33.960692 l 0.011503,-17.818243 v -0.531156 l 0.00543,-6.5294183 C 8.8742784,8.4817241 9.1682353,8.1734845 9.7221686,8.1806094 Z M 36.148013,10.742863 c 1.743326,0.01392 2.960751,1.249371 2.961869,3.079906 v 0.05251 l 0.0034,0.05302 c 0.01853,0.250489 0.03132,0.813161 0.03953,1.482434 -0.960284,-0.687966 -2.103779,-1.13394 -3.343482,-1.237862 L 23.39173,13.131072 V 11.79618 l 12.400647,-1.039806 c 0.120688,-0.01008 0.239379,-0.01443 0.355603,-0.01351 z',
        },
        {
          id: 2,
          name: 'templates',
          icon: 'm 17.5625,9.8007813 c -0.06095,1.5059437 0.562363,2.5833647 1.076172,3.4179687 l -2.986328,-0.02734 c -3.872322,-0.03624 -7.0195315,3.149968 -7.0195315,7.00586 v 17.109375 c 0,3.855834 3.1500175,7.005859 7.0058595,7.005859 h 16.722656 c 3.855841,0 7.005859,-3.150026 7.005859,-7.005859 v -2.75 -0.01758 c -0.02414,-0.96789 -0.262931,-1.907709 -1.02539,-2.52539 -0.76246,-0.617681 -1.667045,-0.584494 -2.277344,-0.470703 C 35.454154,31.65676 34.956185,31.857418 34.548828,32 c -0.407357,0.142582 -0.742269,0.197266 -0.677734,0.197266 -1.816448,0 -3.230469,-1.414023 -3.230469,-3.230469 v -0.04297 c 0,-1.816443 1.414022,-3.230469 3.230469,-3.230469 h 0.0039 0.002 c -0.02591,1.28e-4 0.320388,0.05466 0.730469,0.181641 0.410081,0.126978 0.904404,0.302161 1.478515,0.410156 0.574112,0.107996 1.340572,0.211049 2.144532,-0.296875 0.803959,-0.507924 1.136718,-1.513001 1.136718,-2.40039 v -3.390625 c 0,-3.855838 -3.153017,-6.984874 -6.998046,-7.007813 l -3.542969,-0.02148 c 0.162408,-0.394901 0.361344,-0.837343 0.560547,-1.337891 0.233225,-0.586037 0.476562,-1.185296 0.476562,-1.9882811 0,-3.3838406 -2.77049,-6.1387551 -6.154297,-6.1542969 C 19.982731,3.6703882 17.539418,6.4922256 17.5625,9.8007813 Z M 23.708984,6.6875 c 1.773788,0 3.154297,1.3805118 3.154297,3.1542969 0,0.00549 -0.07755,0.4112231 -0.263672,0.8789061 -0.186123,0.467683 -0.445941,1.018391 -0.667968,1.591797 -0.222028,0.573406 -0.492315,1.127768 -0.361329,2.033203 0.06549,0.452718 0.346661,1.042718 0.820313,1.386719 0.473652,0.344001 0.987473,0.427 1.439453,0.429687 l 4.521484,0.02734 c 2.256921,0.01347 4.015625,1.761701 4.015625,4.007813 v 3.0625 c -0.251888,-0.06525 -0.520477,-0.14083 -0.873046,-0.25 -0.461906,-0.143026 -0.944342,-0.318952 -1.626954,-0.316407 -3.424094,0.0022 -6.226562,2.805897 -6.226562,6.230469 v 0.04297 c 0,3.425901 2.804566,6.230469 6.230469,6.230469 0.728719,0 1.214928,-0.207932 1.669922,-0.367188 0.357242,-0.125041 0.614616,-0.203502 0.841796,-0.265625 0.0065,0.0584 -0.01801,-0.04675 -0.01563,0.04883 v 2.69336 c 0,2.246104 -1.75975,4.005859 -4.005859,4.005859 H 15.638672 c -2.24611,0 -4.005859,-1.759756 -4.005859,-4.005859 V 20.197266 c 0,-2.246063 1.762869,-4.026722 3.992187,-4.00586 l 4.179687,0.03906 c 0.441138,0.0041 0.858778,-0.01668 1.353516,-0.253906 0.494738,-0.237222 1.00174,-0.891447 1.082031,-1.457032 0.160582,-1.131169 -0.297481,-1.559682 -0.585937,-2.072265 -0.576912,-1.025167 -1.122694,-2.093635 -1.101563,-2.5332035 l 0.002,-0.035156 v -0.037109 c 0,-1.7737838 1.380514,-3.1542969 3.154297,-3.1542969 z',
        },
        {
          id: 3,
          name: 'packs',
          icon: 'm 20.716197,2.2600586 c -3.526603,0.021492 -7.47311,1.1898149 -9.949534,3.1139128 L 4.5179127,10.228541 c -1.4089796,1.09473 -2.1057563,2.251628 -2.1289846,3.300291 l -0.029196,-0.03455 0.018978,23.449 h 0.015571 c 0.053192,1.344937 1.2313929,2.495295 3.4696357,3.074981 l 16.8562022,4.365512 c 4.047856,1.048349 9.964956,-0.173255 13.266854,-2.738723 l 6.248263,-4.854572 c 1.390963,-1.080733 2.035822,-2.218697 2.083241,-3.252117 l 0.01656,-3.78e-4 0.03599,-23.375513 -0.0059,0.0068 C 44.364426,8.7838478 43.179494,7.5939874 40.889212,7.0008307 L 24.033033,2.6352462 C 23.021068,2.3731579 21.892219,2.2528935 20.716684,2.2600586 Z m 0.193677,2.0506373 c 0.917058,-0.00555 1.797445,0.087523 2.586898,0.2919748 l 6.107632,1.5786112 -1.458415,1.1270235 -3.255523,-0.9640045 c -1.927148,-0.5706317 -3.664461,-0.4019308 -3.895432,0.3781075 -0.230972,0.7800391 1.134209,1.8673581 3.061357,2.437991 L 25.28074,9.5229347 24.106026,10.430491 20.44904,9.3477506 c -1.927147,-0.5706332 -3.664948,-0.4019321 -3.895919,0.3781068 -0.230972,0.7800386 1.134696,1.8673586 3.061844,2.4379916 l 1.625327,0.481272 -1.065709,0.82337 -3.889106,-1.151842 c -1.927148,-0.570632 -3.664948,-0.401931 -3.895919,0.378108 -0.23097,0.780039 1.134696,1.867359 3.061844,2.437991 l 1.858421,0.550373 -2.182514,1.686641 -7.1091033,-1.855014 C 6.4596586,15.111102 5.5589983,14.353118 5.353447,13.449026 5.5063506,12.737294 6.0382511,11.980081 6.9685558,11.257267 L 13.146746,6.7389541 c 1.931907,-1.501022 5.011956,-2.4114922 7.763128,-2.4282582 z m 9.747098,2.1430959 8.123229,2.2958962 c 1.552758,0.4021451 2.454807,1.1553783 2.664755,2.055018 -0.149766,0.714892 -0.650524,1.514258 -1.614133,2.202465 l -6.148992,4.391303 c -2.719132,1.801921 -7.191733,2.954605 -10.349538,2.13677 l -7.152414,-1.892485 2.146017,-1.658904 3.420486,1.012667 c 1.927149,0.570632 3.664462,0.402417 3.895433,-0.377621 0.230972,-0.780039 -1.134695,-1.867359 -3.061844,-2.437992 l -1.388827,-0.411198 1.065221,-0.823369 3.65358,1.081281 c 1.927147,0.570633 3.664464,0.401932 3.895435,-0.378107 0.230971,-0.780039 -1.134699,-1.867359 -3.061847,-2.437992 l -1.621434,-0.479812 1.174712,-0.9080426 4.054559,1.2005046 c 1.927149,0.570632 3.664462,0.401931 3.895433,-0.378108 0.230975,-0.7800386 -1.13421,-1.867359 -3.061355,-2.4379915 L 29.16206,7.6090392 Z m 10.97534,8.4847932 0.06472,17.92726 c -0.125581,0.868963 -0.49417,1.618392 -1.633598,2.503687 l -6.134392,4.457 C 31.353164,41.827907 26.60545,42.72618 23.450058,41.899067 L 7.8542135,37.81093 C 6.3195172,37.412436 5.4219408,36.672059 5.1987013,35.786085 5.1873168,35.459065 5.1754862,35.132055 5.1641523,34.80505 l 0.064719,-17.408036 c 0.00162,-0.416163 0.8050291,0.321198 1.28031,0.444288 l 16.2109367,4.107115 c 4.047852,1.048346 9.964957,-0.173261 13.266855,-2.738725 z m -12.651277,8.741244 c -1.067757,0 -1.927034,0.859275 -1.927034,1.927035 V 38.88686 c 0,1.067757 0.859277,1.928009 1.927034,1.928009 1.067762,0 1.928007,-0.860252 1.928007,-1.928009 V 25.606864 c 0,-1.06776 -0.860245,-1.927035 -1.928007,-1.927035 z m -10.850276,0.88955 c -0.568143,0 -1.070531,0.114355 -1.507564,0.342584 -0.437033,0.223373 -0.835327,0.572796 -1.194664,1.048677 v -1.194664 h -2.607337 v 11.260986 h 2.607337 v -4.282786 c 0.359337,0.475881 0.757631,0.827749 1.194664,1.055975 0.437033,0.223375 0.939421,0.335289 1.507564,0.335289 1.005175,0 1.831085,-0.398294 2.476922,-1.194666 0.645836,-0.801226 0.968383,-1.830927 0.968383,-3.08861 0,-1.257683 -0.322547,-2.28445 -0.968383,-3.080822 -0.645837,-0.801226 -1.471747,-1.201963 -2.476922,-1.201963 z m -0.968384,1.893944 c 0.558431,0 0.983116,0.203789 1.274471,0.611689 0.296211,0.407898 0.444289,1.000206 0.444289,1.777152 0,0.77695 -0.148078,1.369745 -0.444289,1.777642 -0.291355,0.407898 -0.71604,0.611688 -1.274471,0.611688 -0.55843,0 -0.988488,-0.20379 -1.289556,-0.611688 -0.29621,-0.412754 -0.444288,-1.005549 -0.444288,-1.777642 0,-0.772089 0.148078,-1.361954 0.444288,-1.769854 0.301068,-0.412753 0.731126,-0.618987 1.289556,-0.618987 z',
        },
        {
          id: 4,
          text: '',
          name: 'settings',
          icon: 'm 23.492535,8.6849562 v 6.221e-4 c -0.434225,-9.636e-4 -0.867743,0.040492 -1.20333,0.3893831 -0.442093,0.6475357 -0.831412,1.5150866 -1.174824,2.5037026 a 12.694069,12.757367 0 0 0 -2.941001,1.096583 c -0.917521,-0.547754 -1.791904,-0.970606 -2.560715,-1.183922 -0.481489,-0.05013 -0.839384,0.197715 -1.170577,0.478542 -0.110373,0.09364 -0.217662,0.191584 -0.325701,0.282637 -0.501925,0.42304 -1.047005,0.815306 -1.0517,1.568454 0.01245,0.755445 0.258167,1.691831 0.650187,2.715983 a 12.694069,12.757367 0 0 0 -2.072469,4.554928 c -1.01525,0.348737 -1.9065257,0.74566 -2.567993,1.197265 -0.4651878,0.447449 -0.3834854,1.069406 -0.3839256,1.634564 -5.281e-4,0.656422 -0.052663,1.325859 0.5197851,1.815306 0.5769376,0.470976 1.4347955,0.881629 2.4509345,1.239113 a 12.694069,12.757367 0 0 0 2.1404,4.602857 c -0.385517,0.995506 -0.655695,1.927156 -0.736919,2.72023 0.04183,0.644097 0.569789,0.983389 1.00136,1.348288 0.501262,0.423824 0.979244,0.895012 1.722509,0.773309 0.720056,-0.134804 1.571053,-0.514373 2.482474,-1.046243 a 12.694069,12.757367 0 0 0 2.842745,1.044423 c 0.343473,0.988891 0.733228,1.85722 1.17543,2.504917 0.447449,0.465186 1.069407,0.383484 1.634564,0.383925 0.656423,6.21e-4 1.325858,0.05266 1.815305,-0.519785 0.46114,-0.564889 0.864459,-1.3995 1.216673,-2.38786 a 12.694069,12.757367 0 0 0 2.738424,-1.006816 c 0.899354,0.522111 1.738688,0.894212 2.450331,1.027439 0.743263,0.121703 1.221244,-0.349485 1.722506,-0.773309 0.431572,-0.364899 0.959531,-0.704191 1.00136,-1.348288 -0.07958,-0.777043 -0.340258,-1.68741 -0.713262,-2.660185 a 12.694069,12.757367 0 0 0 2.184066,-4.662902 c 1.015633,-0.357395 1.872991,-0.768305 2.449723,-1.239113 0.572446,-0.489447 0.520906,-1.158884 0.52039,-1.815306 -1.08e-4,-0.141291 0.005,-0.286493 0.0055,-0.431235 9.32e-4,-0.434224 -0.04049,-0.867743 -0.389386,-1.203329 -0.661009,-0.451257 -1.551312,-0.847508 -2.565615,-1.196051 a 12.694069,12.757367 0 0 0 -2.11553,-4.6253 c 0.376627,-0.997043 0.611936,-1.908483 0.624104,-2.64684 -0.0047,-0.753147 -0.549169,-1.145415 -1.051093,-1.568453 -0.108038,-0.09105 -0.215932,-0.189001 -0.326309,-0.282637 -0.33119,-0.280827 -0.689087,-0.528669 -1.170577,-0.478542 -0.758076,0.210337 -1.618418,0.62491 -2.521897,1.161481 a 12.694069,12.757367 0 0 0 -2.84455,-1.059586 C 26.602175,10.607245 26.199379,9.7752705 25.73908,9.2114137 25.249633,8.6389678 24.580198,8.6905077 23.923775,8.6910218 c -0.14129,1.103e-4 -0.286492,-0.00575 -0.431234,-0.0061 z m 0.507655,9.5520378 a 5.7631307,5.7631307 0 0 1 5.763125,5.763124 5.7631307,5.7631307 0 0 1 -5.763125,5.763126 5.7631307,5.7631307 0 0 1 -5.763126,-5.763126 5.7631307,5.7631307 0 0 1 5.763126,-5.763124 z',
        },
        {
          id: 5,
          c: 'mr-3',
          name: 'info',
          icon: 'm 39.996094,24.009766 q 0,6.621093 -4.6875,11.308593 -4.6875,4.667969 -11.308594,4.667969 -6.621094,0 -11.308594,-4.667969 -4.6874997,-4.6875 -4.6874997,-11.308593 0,-6.621094 4.6874997,-11.308594 Q 17.378906,8.0136719 24,8.0136719 q 6.621094,0 11.308594,4.6875001 4.6875,4.6875 4.6875,11.308594 z m -2.617188,0 q 0,-5.546875 -3.925781,-9.472657 Q 29.546875,10.611328 24,10.611328 q -5.546875,0 -9.472656,3.925781 -3.925781,3.925782 -3.925781,9.472657 0,5.546875 3.925781,9.472656 3.925781,3.90625 9.472656,3.90625 5.546875,0 9.453125,-3.90625 3.925781,-3.925781 3.925781,-9.472656 z M 27.28125,15.767578 q 0,1.269531 -0.976563,2.167969 Q 25.347656,18.833984 24,18.833984 q -1.367188,0 -2.324219,-0.898437 -0.957031,-0.898438 -0.957031,-2.167969 0,-1.269531 0.957031,-2.167969 Q 22.632812,12.701172 24,12.701172 q 1.347656,0 2.304687,0.898437 0.976563,0.898438 0.976563,2.167969 z M 26.675781,35.962891 H 21.304687 V 20.728516 h 5.371094 z',
        },
      ],
      tabIndex: 0,
      folders: Object,
    };
  },
  async mounted() {
    // await store.dispatch('taskbox/GET_PACK_LIST');
    // await store.dispatch('taskbox/GET_FILE_LIST');
    await ipcRenderer.invoke('app:get-Folders').then((folders) => {
      this.folders = folders;
    });
    this.$store.dispatch('user/GET_TASKS', { member: null });
  },
  watch: {
    tab(value) {
      if (value) this.tabIndex = value;
    },
    workRemotelly(value) {
      if (!value && this.authenticated) {
        this.signout();
        this.tabIndex = 0;
      }
    },
    authenticated() {
      this.tabIndex = 0;
    },
  },
  computed: {
    ...mapState({
      analysing: (state) => state.taskbox.analysing,
      userStatus: (state) => state.user.status,
      currentTaskBox: (state) => _.cloneDeep(state.taskbox.currentTaskBox),
      notification: (state) => _.cloneDeep(state.notification),
      workRemotelly: (state) => state.app.serverSettings[1].value,
      session: (state) => _.cloneDeep(state.user.session.authenticated),
      serverReady: (state) => state.user.serverReady,
      profile: (state) => _.cloneDeep(state.user.profile),
      teams: (state) => _.cloneDeep(state.user.teams),
      errorMessage: (state) => state.errorState,
      userTaskCount: (state) => _.cloneDeep(state.user.taskCount),
    }),
    dataReady() {
      return this.currentTaskBox ? true : false;
    },
    authenticated() {
      return store.getters['user/authenticated'];
    },
    hasNofitications() {
      return this.notification.invitations.hasPendingInvitations.value || this.notification.members.hasPendingMembers.value ? true : false;
    },
  },
  methods: {
    async changed(t) {
      await new Promise((res) => {
        switch (t) {
          case 0:
            this.$store.dispatch('user/GET_TASKS', { member: null });
            break;
          case 1:
            this.$store.dispatch('taskbox/GET_FILE_LIST');
            break;
          case 2:
            this.$store.dispatch('templates/FETCH_ALL');
            break;
          case 3:
            this.$store.dispatch('taskbox/GET_PACK_LIST');
            break;
          default:
            break;
        }
        setTimeout(res, 1000);
      });
    },
    signin() {
      this.$listeners.signIn();
    },
    signout() {
      this.$store
        .dispatch('user/LOGOUT')
        .then(() => {})
        .catch((error) => console.log(error));
    },
  },
};
</script>

<style>
.v-badge__badge {
  color: #454545;
}

.v-expansion-panel-content__wrap {
  padding: 0 !important;
  padding-bottom: 10px !important;
}
.theme--light.v-expansion-panels .v-expansion-panel-header .v-expansion-panel-header__icon .v-icon {
  color: rgb(199, 199, 199) !important;
  font-size: 16px;
  position: absolute;
  right: 10px;
  top: 30px;
  margin-right: 10px;
}
.main.theme--light.v-tabs > .v-tabs-bar {
  width: 50px !important;
  background-color: transparent !important;
}
.theme--light.v-tabs-items {
  background-color: #eeeeee !important;
  overflow-x: visible !important;
}
</style>

<style scoped>
.tab-item-wrapper {
  height: 100vh;
}
.home {
  overflow-y: scroll;
  overflow-x: hidden;
}
</style>
